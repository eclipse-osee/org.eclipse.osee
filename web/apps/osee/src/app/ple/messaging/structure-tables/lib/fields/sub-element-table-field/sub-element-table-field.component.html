<!--
* Copyright (c) 2021 Boeing
*
* This program and the accompanying materials are made
* available under the terms of the Eclipse Public License 2.0
* which is available at https://www.eclipse.org/legal/epl-2.0/
*
* SPDX-License-Identifier: EPL-2.0
*
* Contributors:
*     Boeing - initial API and implementation
-->
@if (header() !== 'rowControls') {
	@if (
		!element().interfaceElementArrayHeader.value ||
		header() === 'name' ||
		header() === 'interfaceElementIndexStart' ||
		header() === 'interfaceElementIndexEnd'
	) {
		@if (editMode() === true && !element().autogenerated) {
			@if (header() === 'platformType') {
				<osee-persisted-platform-type-relation-selector
					[artifactId]="element().id"
					[(platformType)]="platformType"
					(openContextMenu)="
						openGeneralMenu($event, element(), platformType())
					"></osee-persisted-platform-type-relation-selector>
			} @else if (editableElementHeaders.includes(header())) {
				@if (
					editableElementStringHeader() === header() &&
					(header() !== 'enumLiteral' ||
						(element().platformType.interfaceLogicalType
							| attributeToValue) !== 'enumeration')
				) {
					<form
						#defaultForm="ngForm"
						[artifactId]="element().id"
						oseeElementImpactsValidator>
						<osee-persisted-string-attribute-input
							[artifactId]="element().id"
							[artifactApplicability]="element().applicability"
							[value]="stringValue()"
							[disabled]="isDeleted()"
							(contextmenu)="
								openGeneralMenu(
									$event,
									element(),
									platformType()
								)
							">
							@if (header() === 'name') {
								@if (
									element().interfaceElementIndexEnd.value -
										element().interfaceElementIndexStart
											.value >
									0
								) {
									<p matSuffix>
										{{
											'[' +
												element()
													.interfaceElementIndexStart
													.value +
												'...' +
												element()
													.interfaceElementIndexEnd
													.value +
												']'
										}}
									</p>
								}
							}
						</osee-persisted-string-attribute-input>
					</form>
				} @else if (editableElementBooleanHeader() === header()) {
					<form
						#defaultForm="ngForm"
						[artifactId]="element().id"
						oseeElementImpactsValidator>
						<osee-persisted-boolean-attribute-toggle
							[artifactId]="element().id"
							[artifactApplicability]="element().applicability"
							[value]="booleanValue()"
							[disabled]="isDeleted()"
							(contextmenu)="
								openGeneralMenu(
									$event,
									element(),
									platformType()
								)
							"></osee-persisted-boolean-attribute-toggle>
					</form>
				} @else if (editableElementNumberHeader() === header()) {
					<form
						#defaultForm="ngForm"
						[artifactId]="element().id"
						oseeElementImpactsValidator>
						<osee-persisted-number-attribute-input
							[artifactId]="element().id"
							[artifactApplicability]="element().applicability"
							[value]="numberValue()"
							[disabled]="isDeleted()"
							(contextmenu)="
								openGeneralMenu(
									$event,
									element(),
									platformType()
								)
							"></osee-persisted-number-attribute-input>
					</form>
				} @else if (header() === 'applicability') {
					<form
						#defaultForm="ngForm"
						[artifactId]="element().id"
						oseeElementImpactsValidator>
						<osee-persisted-applicability-dropdown
							[artifactId]="element().id"
							[(applicability)]="applicability"
							[required]="true"
							[disabled]="isDeleted()"
							(contextmenu)="
								openGeneralMenu(
									$event,
									element(),
									platformType()
								)
							" />
					</form>
				} @else if (header() === 'interfacePlatformTypeUnits') {
					<!-- TODO: note the above condition should be made more flexible in the future for more platform type fields to be editable here -->
					<form
						#defaultForm="ngForm"
						[artifactId]="element().id"
						oseeElementImpactsValidator>
						<osee-persisted-unit-dropdown
							[artifactId]="platformType().id"
							[artifactApplicability]="
								platformTypeApplicability()
							"
							[required]="true"
							[(value)]="units"
							[hintHidden]="true"
							[disabled]="isDeleted()"
							(contextmenu)="
								openGeneralMenu(
									$event,
									element(),
									platformType()
								)
							"></osee-persisted-unit-dropdown>
					</form>
				} @else {
					@if (
						header() === 'enumLiteral' &&
						(element().platformType.interfaceLogicalType
							| attributeToValue) === 'enumeration'
					) {
						<osee-enum-literals-field
							[enumLiterals]="
								element().enumLiteral.value
							"></osee-enum-literals-field>
					}
					@if (
						header() !== 'enumLiteral' ||
						(element().platformType.interfaceLogicalType
							| attributeToValue) !== 'enumeration'
					) {
						<osee-messaging-sub-element-table-no-edit-field
							[filter]="filter()"
							[header]="headerWithoutRowControls()"
							[element]="element()"
							[width]="
								(layout | async)?.tableRecommendations?.width ||
								''
							"
							[attr.data-cy]="
								'element-table-' +
								header() +
								'-' +
								element().name.value +
								'-' +
								element()[elementHeader()]
							"></osee-messaging-sub-element-table-no-edit-field>
					}
				}
			} @else {
				<osee-messaging-sub-element-table-no-edit-field
					[filter]="filter()"
					[header]="headerWithoutRowControls()"
					[element]="element()"
					[width]="
						(layout | async)?.tableRecommendations?.width || ''
					"
					[attr.data-cy]="
						'element-table-' +
						header() +
						'-' +
						element().name.value +
						'-' +
						element()[elementHeader()]
					"></osee-messaging-sub-element-table-no-edit-field>
			}
		} @else {
			@if (
				header() === 'enumLiteral' &&
				(element().platformType.interfaceLogicalType
					| attributeToValue) === 'enumeration'
			) {
				<osee-enum-literals-field
					[enumLiterals]="
						element().enumLiteral.value
					"></osee-enum-literals-field>
			}
			@if (
				header() !== 'enumLiteral' ||
				(element().platformType.interfaceLogicalType
					| attributeToValue) !== 'enumeration'
			) {
				<osee-messaging-sub-element-table-no-edit-field
					[filter]="filter()"
					[header]="headerWithoutRowControls()"
					[element]="element()"
					[width]="
						(layout | async)?.tableRecommendations?.width || ''
					"
					[attr.data-cy]="
						'element-table-' +
						header() +
						'-' +
						element().name.value +
						'-' +
						element()[elementHeader()]
					"></osee-messaging-sub-element-table-no-edit-field>
			}
		}
	} @else {
		@if (
			header() === 'description' ||
			header() === 'beginWord' ||
			header() === 'endWord' ||
			header() === 'beginByte' ||
			header() === 'endByte' ||
			header() === 'notes' ||
			header() === 'applicability'
		) {
			<osee-messaging-sub-element-table-no-edit-field
				[filter]="filter()"
				[header]="elementHeader()"
				[element]="element()"
				[width]="(layout | async)?.tableRecommendations?.width || ''"
				[attr.data-cy]="
					'element-table-' +
					header() +
					'-' +
					element().name.value +
					'-' +
					element()[elementHeader()]
				"></osee-messaging-sub-element-table-no-edit-field>
		}
	}
}
