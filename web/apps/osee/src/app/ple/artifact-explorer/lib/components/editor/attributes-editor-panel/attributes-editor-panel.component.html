<!--
 * Copyright (c) 2023 Boeing
 *
 * This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License 2.0
 * which is available at https://www.eclipse.org/legal/epl-2.0/
 *
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     Boeing - initial API and implementation
 -->
<osee-expansion-panel
	title="Attributes Editor"
	[openDefault]="true">
	<div class="tw-pt-4">
		<form
			#attributesEditorForm="ngForm"
			oseeForm>
			<div class="tw-flex tw-pb-4 tw-pl-4">
				<button
					class="tw-mr-auto"
					[disabled]="attributesEditorForm.invalid"
					(click)="saveChanges()">
					<mat-icon
						[ngClass]="[
							attributesEditorForm.invalid
								? 'tw-text-warning'
								: '',
							hasChanges() ? 'tw-text-primary' : '',
						]"
						>save</mat-icon
					>
				</button>
			</div>

			@if (attributesEditorForm.invalid) {
				<div class="tw-pb-4 tw-italic tw-text-warning">
					*Required fields not filled out
				</div>
			}

			<osee-attributes-editor
				[attributes]="tab.artifact.attributes"
				[editable]="tab.artifact.editable"
				(updatedAttributes)="handleUpdatedAttributes($event)" />
		</form>
	</div>
</osee-expansion-panel>
