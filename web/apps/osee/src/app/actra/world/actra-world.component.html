<!--
 * Copyright (c) 2025 Boeing
 *
 * This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License 2.0
 * which is available at https://www.eclipse.org/legal/epl-2.0/
 *
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     Boeing - initial API and implementation
 -->

<div
	class="tw-flex tw-flex-col tw-gap-6 tw-rounded-2xl tw-bg-white tw-p-6 tw-shadow-md">
	<h2 class="tw-text-2xl tw-font-bold tw-text-gray-800">
		{{ title() }}
	</h2>

	<!-- Filter Row -->
	<div class="tw-flex tw-w-full tw-items-center tw-justify-between">
		<div class="tw-flex tw-items-center tw-gap-4">
			<mat-form-field
				appearance="outline"
				class="tw-min-w-[200px]">
				<input
					matInput
					type="text"
					placeholder="Filter table"
					(keyup)="updateFilter($event)" />
			</mat-form-field>
		</div>
	</div>

	<!-- Data Table -->
	<div class="tw-overflow-auto">
		<table
			mat-table
			matSort
			class="tw-min-w-full tw-rounded-lg tw-border tw-text-sm"
			[dataSource]="dataSource">
			<!-- Dynamic Columns -->
			@for (header of headers(); track $index) {
				<ng-container [matColumnDef]="header">
					<th
						mat-sort-header
						mat-header-cell
						*matHeaderCellDef
						class="tw-border-b tw-bg-gray-100 tw-px-4 tw-py-3 tw-font-semibold tw-text-gray-700">
						{{ header }}
					</th>
					<td
						mat-cell
						*matCellDef="let data"
						class="tw-border-b tw-bg-white tw-px-4 tw-py-2">
						@if (header === 'ATS Id') {
							<button
								class="tw-text-blue-600 hover:tw-underline"
								(click)="openWorkflow(data['Id'])">
								{{ data[header] }}
							</button>
						} @else {
							{{ data[header] }}
						}
					</td>
				</ng-container>
			}

			<!-- Header Definitions -->
			<tr
				mat-header-row
				*matHeaderRowDef="headers(); sticky: true"
				class="tw-bg-gray-200"></tr>

			<!-- Row Definitions -->
			<tr
				mat-row
				*matRowDef="let row; columns: headers(); let i = index"
				class="tw-cursor-pointer odd:tw-bg-gray-50 even:tw-bg-white hover:tw-bg-gray-50"></tr>
		</table>
	</div>
</div>
