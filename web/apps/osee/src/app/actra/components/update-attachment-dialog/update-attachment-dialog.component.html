<!--
/*********************************************************************
 * Copyright (c) 2025 Boeing
 *
 * This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License 2.0
 * which is available at https://www.eclipse.org/legal/epl-2.0/
 *
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     Boeing - initial API and implementation
 **********************************************************************/
-->
<div mat-dialog-title>
	<h3 class="tw-font-semibold">Update attachment</h3>
</div>

<div
	mat-dialog-content
	class="tw-p-4">
	<!-- Current file info -->
	<div class="tw-mb-3 tw-text-sm tw-text-osee-neutral-60">
		Current file:
		<span class="tw-break-words tw-font-medium">{{
			data.attachment.fileName
		}}</span>
		<span class="tw-text-xs tw-text-osee-neutral-50">
			({{ data.attachment.sizeBytes | bytes: 0 }})
		</span>
	</div>

	<!-- Drag-and-drop area -->
	<osee-drag-and-drop-upload
		[title]="'Drag & drop a replacement file here'"
		(filesSelected)="onFileSelected($event)"></osee-drag-and-drop-upload>

	<!-- Selected file preview -->
	<div class="tw-mt-4">
		@if (!file()) {
			<div class="tw-text-sm tw-text-osee-neutral-60">
				No file selected.
			</div>
		}

		@if (file(); as f) {
			<div
				class="tw-flex tw-items-center tw-justify-between tw-gap-5 tw-p-2">
				<div
					class="tw-flex tw-min-w-0 tw-flex-1 tw-items-center tw-gap-3">
					<span
						class="tw-block tw-truncate"
						[matTooltip]="f.name"
						matTooltipShowDelay="300">
						{{ f.name }}
					</span>
					<span
						class="tw-whitespace-nowrap tw-text-xs tw-text-osee-neutral-50">
						({{ f.size | bytes: 0 }})
					</span>
				</div>

				<button
					type="button"
					mat-icon-button
					class="tw-rounded tw-bg-osee-red-24 tw-text-osee-neutral-100 hover:tw-bg-osee-red-21"
					aria-label="Remove Attachment"
					(click)="removeFile()">
					<mat-icon>delete</mat-icon>
				</button>
			</div>
		}
	</div>
</div>

<div
	mat-dialog-actions
	class="tw-flex tw-justify-end tw-gap-2 tw-px-4 tw-pb-4">
	<button
		mat-button
		class="tw-rounded tw-bg-osee-neutral-35 tw-px-3 tw-py-2 tw-text-osee-neutral-100 hover:tw-bg-osee-neutral-50"
		type="button"
		(click)="cancel()">
		Cancel
	</button>
	<button
		mat-button
		class="tw-rounded tw-bg-osee-blue-7 tw-px-3 tw-py-2 tw-text-background-background hover:tw-bg-osee-neutral-87 disabled:tw-opacity-50 dark:tw-bg-osee-blue-10"
		color="primary"
		type="button"
		[disabled]="!file()"
		(click)="submit()">
		Update
	</button>
</div>
