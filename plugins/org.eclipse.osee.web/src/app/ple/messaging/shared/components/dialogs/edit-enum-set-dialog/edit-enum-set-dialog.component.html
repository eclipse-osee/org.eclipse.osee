<!--
 * Copyright (c) 2021 Boeing
 *
 * This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License 2.0
 * which is available at https://www.eclipse.org/legal/epl-2.0/
 *
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     Boeing - initial API and implementation
 -->
<ng-container *ngIf="(enumObs|async) as enumerationSet">
    <ng-container *ngIf="(inEditMode|async)===true && (isOnEditablePage|async)===true;else no_edit">
        <h1 mat-dialog-title>Editing {{enumerationSet.name}}</h1>
        <mat-dialog-content>
            <mat-form-field *ngIf="enumerationSet.name !==undefined">
                <mat-label>Edit Enumeration Set Name</mat-label>
                <input matInput [ngModel]="enumerationSet.name" (change)="setName($any($event.target).value)">
            </mat-form-field>
            <br>
            <mat-form-field *ngIf="enumerationSet.description !==undefined">
                <mat-label>Edit Enumeration Set Description</mat-label>
                <input matInput placeholder="Edit Enumeration Set Description" [ngModel]="enumerationSet.description" (change)="setDescription($any($event.target).value)">
            </mat-form-field>
            <br>
            <mat-form-field *ngIf="enumerationSet.applicability !==undefined">
                <mat-label>Change Applicability</mat-label>
                <mat-select [ngModel]="enumerationSet.applicability" (selectionChange)="setApplicability($event.value)" [compareWith]="compareApplics">
                    <mat-option *ngFor="let applicability of (applic|async)" [value]="applicability">
                        {{applicability.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <br>
            Enums:
                <table mat-table [dataSource]="enumerationSet.enumerations||[]">
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef>Name</th>
                        <td mat-cell *matCellDef="let element">
                        {{element.name}}
                        </td>
                    </ng-container>
                <ng-container matColumnDef="ordinal">
                    <th mat-header-cell *matHeaderCellDef>Ordinal</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.ordinal}}
                    </td>
                </ng-container>
                <ng-container matColumnDef="applicability">
                    <th mat-header-cell *matHeaderCellDef>Applicability</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.applicability.name}}
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="['name','ordinal','applicability']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['name','ordinal','applicability'];"></tr>
            </table>
        </mat-dialog-content>
    </ng-container>
    <ng-template #no_edit>
        <h1 mat-dialog-title>Viewing {{enumerationSet.name}}</h1>
        <mat-dialog-content>
            <mat-label>Description: {{enumerationSet.description}}</mat-label>
            <br>
            <mat-label>Applicability: {{enumerationSet.applicability.name}}</mat-label>
            <br>
            Enums:
            <table mat-table [dataSource]="enumerationSet.enumerations||[]">
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>Name</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.name}}
                    </td>
                </ng-container>
                <ng-container matColumnDef="ordinal">
                    <th mat-header-cell *matHeaderCellDef>Ordinal</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.ordinal}}
                    </td>
                </ng-container>
                <ng-container matColumnDef="applicability">
                    <th mat-header-cell *matHeaderCellDef>Applicability</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.applicability.name}}
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="['name','ordinal','applicability']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['name','ordinal','applicability'];"></tr>
            </table>
        </mat-dialog-content>
    </ng-template>
</ng-container>
<mat-dialog-actions align="end">
    <button mat-button (click)="onNoClick()">
        Cancel
    </button>
    <button mat-raised-button color="primary" [mat-dialog-close]="enumSet">
        Ok
    </button>
</mat-dialog-actions>
