<!--
 * Copyright (c) 2021 Boeing
 *
 * This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License 2.0
 * which is available at https://www.eclipse.org/legal/epl-2.0/
 *
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     Boeing - initial API and implementation
 -->
<h1 mat-dialog-title>Create New Message</h1>
<mat-dialog-content>
    <mat-form-field>
        <label>Name</label>
        <input matInput type="text" [(ngModel)]="data.name" #input required>
    </mat-form-field>
    <br>
    <mat-form-field>
        <label>Description</label>
        <textarea matInput cdkTextareaAutosize type="text" [(ngModel)]="data.description" #input required></textarea>
    </mat-form-field>
    <br>
    <mat-form-field>
        <label>Rate</label>
        <mat-select [(ngModel)]="data.interfaceMessageRate" required>
            <mat-option *ngFor="let option of (rates|async)" [value]="option" >
                {{option}} Hz
            </mat-option>
        </mat-select>
    </mat-form-field>
    <br>
    <mat-form-field>
        <label>Periodicity</label>
        <mat-select [(ngModel)]="data.interfaceMessagePeriodicity" required>
            <mat-option *ngFor="let option of (periodicities|async)" [value]="option" >
                {{option}}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <br>
    <mat-slide-toggle [(ngModel)]="data.interfaceMessageWriteAccess" [labelPosition]='data.interfaceMessageWriteAccess? "after":"before"'>
        <ng-container *ngIf="data.interfaceMessageWriteAccess;else read">
            Writable
        </ng-container>
        <ng-template #read>
            Read Only
        </ng-template>
    </mat-slide-toggle>
    <br>
    <mat-form-field>
        <label>Type</label>
        <mat-select [(ngModel)]="data.interfaceMessageType" required>
            <mat-option *ngFor="let option of (types|async)" [value]="option" >
                {{option}}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <br>
    <mat-form-field>
        <label>Message Number</label>
        <input matInput type="text" [(ngModel)]="data.interfaceMessageNumber" #input required>
    </mat-form-field>
    <br>
    <mat-form-field>
        <label>Initiating Node</label>
        <mat-select [(ngModel)]="data.initiatingNode" required>
            <mat-option *ngFor="let option of (nodes|async)" [value]="option">
                {{option.name}}
            </mat-option>
        </mat-select>
    </mat-form-field>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-button (click)="onNoClick()">
        Cancel
    </button>
    <button mat-raised-button [mat-dialog-close]="data" color="primary" [disabled]="data.name.length===0||
    data.description.length===0||
    data.interfaceMessageNumber.length===0||
    data.interfaceMessagePeriodicity.length===0||
    data.interfaceMessageType.length===0||
    data.interfaceMessageWriteAccess.length===0||
    data.interfaceMessageRate.length===0 ||
    data.initiatingNode.name.length===0">
        Ok
    </button>
</mat-dialog-actions>