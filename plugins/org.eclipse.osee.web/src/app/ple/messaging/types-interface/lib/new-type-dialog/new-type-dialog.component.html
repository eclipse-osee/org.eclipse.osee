<!--
 * Copyright (c) 2022 Boeing
 *
 * This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License 2.0
 * which is available at https://www.eclipse.org/legal/epl-2.0/
 *
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     Boeing - initial API and implementation
 -->
<!-- <h1 mat-dialog-title>Create New Platform Type</h1>
<mat-horizontal-stepper
	#stepper
	linear="true"
	class="new-platform-type-stepper">
	<mat-step
		label="Select a logical type"
		[completed]="
			!(
				(logicalTypeSelector !== undefined &&
					logicalTypeSelector.form !== undefined &&
					(logicalTypeSelector.form.pending ||
						logicalTypeSelector.form.disabled ||
						logicalTypeSelector.form.invalid)) ||
				logicalTypeSelector === undefined ||
				logicalTypeSelector.form === undefined
			)
		">
		<mat-dialog-content>
			<ng-container *ngIf="logicalTypeSubject | async as __logicalType">
				<osee-logical-type-selector
					[type]="__logicalType"
					(typeChanged)="setLogicalType($event)">
				</osee-logical-type-selector>
			</ng-container>
		</mat-dialog-content>
		<mat-dialog-actions align="end">
			<button
				mat-button
				matStepperNext
				[disabled]="
					(logicalTypeSelector !== undefined &&
						logicalTypeSelector.form !== undefined &&
						(logicalTypeSelector.form.pending ||
							logicalTypeSelector.form.disabled ||
							logicalTypeSelector.form.invalid)) ||
					logicalTypeSelector === undefined ||
					logicalTypeSelector.form === undefined
				"
				data-cy="stepper-next-1">
				Next
			</button>
		</mat-dialog-actions>
	</mat-step>
	<form #platformTypeForm="ngForm">
		<mat-step
			label="Fill out type information"
			[completed]="platformTypeForm.valid && platformTypeForm.touched">
			<ng-container *ngIf="logicalTypeSubject | async as __logicalType">
				<ng-container
					*ngIf="
						__logicalType.id !== '' && __logicalType.id !== '-1'
					">
					<mat-dialog-content>
						<osee-new-platform-type-form
							[logicalType]="__logicalType"
							(attributes)="
								attributesUpdate($event)
							"></osee-new-platform-type-form>
						<ng-container
							*ngIf="__logicalType.name === 'enumeration'">
							<ng-container
								*ngIf="(createNewEnum | async) !== true">
								<mat-form-field class="wide-form">
									<mat-label
										>Select an Enumeration Set</mat-label
									>
									<mat-select
										[(ngModel)]="enumSet"
										name="enumSetSelect"
										[compareWith]="compareEnumSet">
										<osee-mat-option-loading
											[data]="enumSets"
											objectName="Enumeration Sets">
											<ng-template let-option>
												<mat-option [value]="option">
													{{ option.name }}
												</mat-option>
											</ng-template>
										</osee-mat-option-loading>
									</mat-select>
									<button
										mat-icon-button
										matSuffix
										(click)="
											toggleEnumCreationState($event)
										">
										<mat-icon>{{
											(createNewEnum | async) !== true
												? 'add'
												: 'remove'
										}}</mat-icon>
									</button>
								</mat-form-field>
							</ng-container>
							<div
								[@detailExpand]="
									(createNewEnum | async) === true &&
									__logicalType.name === 'enumeration'
										? 'expanded'
										: 'collapsed'
								">
								<ng-container
									*ngIf="(createNewEnum | async) === true">
									<ng-container
										*ngIf="
											platformType | async as attrs;
											else NoBitSize
										">
										<ng-container
											*ngIf="
												attrs.interfacePlatformTypeBitSize !==
													undefined &&
													attrs.interfacePlatformTypeBitSize !==
														'0';
												else NoBitSize
											">
											<osee-enum-set-form
												[bitSize]="
													attrs.interfacePlatformTypeBitSize ||
													'0'
												"
												(enumSet)="
													updateEnumSet($event)
												"
												(closed)="
													toggleEnumCreationState()
												"></osee-enum-set-form>
										</ng-container>
									</ng-container>
									<ng-template #NoBitSize>
										No Bit Size defined, please select a bit
										size above.
									</ng-template>
								</ng-container>
							</div>
						</ng-container>
					</mat-dialog-content>
				</ng-container>
				<mat-dialog-actions align="end">
					<button
						mat-button
						matStepperPrevious>
						Back
					</button>
					<button
						mat-raised-button
						matStepperNext
						[disabled]="
							platformTypeForm.pending ||
							platformTypeForm.invalid ||
							platformTypeForm.disabled
						"
						[color]="
							platformTypeForm.pending ||
							platformTypeForm.invalid ||
							platformTypeForm.disabled
								? ''
								: 'primary'
						"
						[attr.data-cy]="
							platformTypeForm.pending ||
							platformTypeForm.invalid ||
							platformTypeForm.disabled
								? 'stepper-next-2-disabled'
								: 'stepper-next-2'
						">
						Next
					</button>
				</mat-dialog-actions>
			</ng-container>
		</mat-step>
	</form>
	<mat-step label="Summary">
		<mat-dialog-content>
			<p class="mat-headline-5">
				A new platform type of type
				{{ (logicalTypeSubject | async)?.name | titlecase }} will be
				created with the following properties:
			</p>
			<br />
			<ng-container *ngIf="platformType | async as attrs">
				<ng-container *ngFor="let attr of attrs | keyvalue">
					<mat-label class="mat-headline-6">
						{{ attr.key }} : {{ attr.value }}</mat-label
					>
					<br />
				</ng-container>
			</ng-container>
		</mat-dialog-content>
		<mat-dialog-actions align="end">
			<button
				mat-button
				matStepperPrevious>
				Back
			</button>
			<button
				mat-raised-button
				color="primary"
				*ngIf="!disableClose"
				[mat-dialog-close]="closeDialog()"
				data-cy="close-new-platform-menu">
				Ok
			</button>
			<button
				mat-raised-button
				color="primary"
				*ngIf="disableClose"
				(click)="hideTypeDialog()">
				Create Type
			</button>
		</mat-dialog-actions>
	</mat-step>
</mat-horizontal-stepper> -->
<osee-new-type-form></osee-new-type-form>
