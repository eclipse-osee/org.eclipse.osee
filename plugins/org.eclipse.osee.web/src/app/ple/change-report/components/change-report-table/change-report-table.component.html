<!--
 * Copyright (c) 2022 Boeing
 *
 * This program and the accompanying materials are made
 * available under the terms of the Eclipse Public License 2.0
 * which is available at https://www.eclipse.org/legal/epl-2.0/
 *
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     Boeing - initial API and implementation
 -->
<div class="change-report-table-container">
	<ng-container *ngIf="viewData | async as _viewData">
		<div class="transaction-info">
			<p>
				Showing changes made to
				<span class="tx-info-bold">{{ _viewData.branch!.name }}</span>
				compared to its parent branch
				<span class="tx-info-bold">{{
					_viewData.parentBranch.name
				}}</span>
			</p>
			<p>
				Last modified on
				<span class="tx-info-bold">{{
					_viewData.txInfo.timeStamp
				}}</span>
				by
				<span class="tx-info-bold">{{
					_viewData.txInfo.author.name
				}}</span>
				-- Comment:
				<span class="tx-info-bold">{{ _viewData.txInfo.comment }}</span>
			</p>
		</div>
	</ng-container>
	<ng-container *ngIf="changes | async as _changes">
		<table
			mat-table
			[dataSource]="_changes || []"
			class="mat-elevation-z1 change-table">
			<ng-container
				[matColumnDef]="header"
				*ngFor="let header of headers">
				<th
					mat-header-cell
					*matHeaderCellDef
					class="message-element-interface-table-view-message-header">
					{{ (getHeaderByName(header) | async)?.humanReadable || '' }}
				</th>
				<td
					mat-cell
					*matCellDef="let item">
					{{ item[header] }}
				</td>
			</ng-container>
			<tr
				mat-header-row
				*matHeaderRowDef="headers"></tr>
			<tr
				mat-row
				*matRowDef="let row; columns: headers"
				class="message-detail-row"></tr>
		</table>
	</ng-container>
</div>
